<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="fleet_costs_report_view_search" model="ir.ui.view">
        <field name="name">fleet.vehicle.cost.view.search</field>
        <field name="model">fleet.vehicle.cost.report</field>
        <field name="arch" type="xml">
            <search string="Fleet Costs Analysis">
                <field name="name" filter_domain="[('name', 'ilike', self)]"/>
                <field name="driver_id" filter_domain="[('driver_id', 'ilike', self)]"/>
                <field name="date_start"/>
                <filter string="Service" name="service" domain="[('cost_type', '=', 'service')]"/>
                <filter string="Contract" name="contract" domain="[('cost_type', '=', 'contract')]"/>
                <separator/>
                <filter name="filter_date_start" date="date_start" default_period="this_year"/>
                <group expand="1" string="Group By">
                    <filter string="Vehicle" name="vehicle" context="{'group_by':'vehicle_id'}"/>
                    <filter string="Driver" name="driver" context="{'group_by':'driver_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="fleet_costs_report_view_pivot" model="ir.ui.view">
        <field name="name">fleet.vehicle.cost.view.pivot</field>
        <field name="model">fleet.vehicle.cost.report</field>
        <field name="arch" type="xml">
            <pivot sample="1">
                <field name="date_start" type="col" interval="year" />
                <field name="cost_type" type="col" />
                <field name="vehicle_id" type="row" />
                <field name="cost" type="measure" />
            </pivot>
        </field>
    </record>

    <record id="fleet_costs_report_view_graph" model="ir.ui.view">
        <field name="name">fleet.vehicle.cost.view.graph</field>
        <field name="model">fleet.vehicle.cost.report</field>
        <field name="arch" type="xml">
            <graph string="Fleet Costs Analysis" sample="1">
                <field name="date_start" interval="month"/>
                <field name="cost_type"/>
                <field name="cost" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="fleet_vechicle_costs_report_view_tree" model="ir.ui.view">
        <field name="name">fleet.vehicle.cost.report.view.tree</field>
        <field name="model">fleet.vehicle.cost.report</field>
        <field name="arch" type="xml">
            <tree string="Fleet Costs Analysis" create="0">
                <field name="name"/>
                <field name="driver_id" optional="show"/>
                <field name="fuel_type" optional="hide"/>
                <field name="date_start" optional="show"/>
                <field name="cost" optional="show" sum="Sum of Cost"/>
                <field name="cost_type" optional="show"/>
                <field name="company_id" groups="base.group_multi_company"/>
            </tree>
        </field>
    </record>

    <record id="fleet_vechicle_costs_report_view_form" model="ir.ui.view">
        <field name="name">fleet.vehicle.cost.report.form</field>
        <field name="model">fleet.vehicle.cost.report</field>
        <field name="arch" type="xml">
            <form string="Fleet Costs Analysis" create="0" edit="0">
                <sheet>
                    <group>
                        <group>
                            <field name="vehicle_id"/>
                            <field name="driver_id"/>
                            <field name="fuel_type"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                        <group>
                            <field name="date_start"/>
                            <field name="cost"/>
                            <field name="cost_type"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="fleet_costs_reporting_action" model="ir.actions.act_window">
        <field name="name">Costs Analysis</field>
        <field name="res_model">fleet.vehicle.cost.report</field>
        <field name="view_mode">graph,pivot</field>
        <field name="view_id"></field>
        <field name="context" eval="{'search_default_filter_date_start': 1}"/>
        <field name="search_view_id" ref="fleet.fleet_costs_report_view_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
              No data for analysis
            </p>
            <p>
              Manage efficiently your different effective vehicles Costs with Odoo.
            </p>
        </field>
    </record>

    <menuitem name="Reports" parent="menu_root" id="menu_fleet_reporting" sequence="99" groups="fleet_group_manager"/>
    <menuitem id="menu_fleet_reporting_costs"
              name="Costs"
              parent="menu_fleet_reporting"
              action="fleet_costs_reporting_action"
              sequence="1"
              groups="fleet_group_manager" active="False"/>

    <record id="fleet_petrols_report_view_search" model="ir.ui.view">
        <field name="name">fleet.vehicle.petrol.view.search</field>
        <field name="model">fleet.vehicle.petrol.report</field>
        <field name="arch" type="xml">
            <search string="Vehicle Petrol Analysis">
                <field name="name" filter_domain="[('name', 'ilike', self)]"/>
                <field name="driver_id" filter_domain="[('driver_id', 'ilike', self)]"/>
                <filter string="Current Month" name="current_month" domain="[('date', '&lt;', (context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>
                <filter string="Previous Month" name="prev_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('date','&lt;',time.strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 6 Months" name="prev_six_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=5)).strftime('%%Y-%%m-01')),('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 12 Months" name="prev_twelve_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=11)).strftime('%%Y-%%m-01')),('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <separator/>
                <group expand="1" string="Group By">
                    <filter string="Vehicle" name="vehicle" context="{'group_by':'license_plate'}"/>
                    <filter string="Driver" name="driver" context="{'group_by':'driver_id'}"/>
                    <filter string="Date Interval" name="date" context="{'group_by': 'date'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="fleet_petrols_report_view_pivot" model="ir.ui.view">
        <field name="name">fleet.vehicle.petrol.view.pivot</field>
        <field name="model">fleet.vehicle.petrol.report</field>
        <field name="arch" type="xml">
            <pivot sample="1">
                <field name="date" type="col" interval="month" />
                <field name="license_plate" type="row" />
                <field name="petrol_rate" type="measure" />
            </pivot>
        </field>
    </record>

    <record id="fleet_petrols_report_view_graph" model="ir.ui.view">
        <field name="name">fleet.vehicle.petrol.view.graph</field>
        <field name="model">fleet.vehicle.petrol.report</field>
        <field name="arch" type="xml">
            <graph string="Fleet Petrols Analysis" sample="1" stacked="0">
                <field name="date" interval="month"/>
                <field name="license_plate"/>
                <field name="petrol_rate" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="fleet_vechicle_petrols_report_view_tree" model="ir.ui.view">
        <field name="name">fleet.vehicle.petrol.report.view.tree</field>
        <field name="model">fleet.vehicle.petrol.report</field>
        <field name="arch" type="xml">
            <tree string="Fleet Petrols Analysis" create="0">
                <field name="license_plate" optional="show"/>
                <field name="driver_id" optional="hide"/>
                <field name="date" optional="show"/>
                <field name="petrol" optional="show" sum="Sum of Petrol Cost"/>
                <field name="odometer_distance" optional="show"/>
                <field name="trip_distance" optional="show"/>
                <field name="petrol_rate" optional="show"/>
                <field name="petrol_rate_trip" optional="show"/>
            </tree>
        </field>
    </record>

    <record id="fleet_vechicle_petrols_report_view_form" model="ir.ui.view">
        <field name="name">fleet.vehicle.petrol.report.form</field>
        <field name="model">fleet.vehicle.petrol.report</field>
        <field name="arch" type="xml">
            <form string="Fleet Petrols Analysis" create="0" edit="0">
                <sheet>
                    <group>
                        <group>
                            <field name="license_plate"/>
                            <field name="driver_id"/>
                        </group>
                        <group>
                            <field name="date"/>
                            <field name="petrol"/>
                            <field name="odometer_distance"/>
                            <field name="trip_distance"/>
                            <field name="petrol_rate"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="fleet_petrols_reporting_action" model="ir.actions.act_window">
        <field name="name">Petrols Analysis</field>
        <field name="res_model">fleet.vehicle.petrol.report</field>
        <field name="view_mode">graph,pivot</field>
        <field name="view_id"></field>
        <field name="context" eval="{'search_default_current_month': 1}"/>
        <field name="search_view_id" ref="fleet.fleet_petrols_report_view_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
              No data for analysis
            </p>
            <p>
              Manage efficiently your different effective vehicles Costs with Odoo.
            </p>
        </field>
    </record>

    <menuitem id="menu_fleet_reporting_petrols"
              name="Petrols"
              parent="menu_fleet_reporting"
              action="fleet_petrols_reporting_action"
              sequence="3"
              groups="fleet_group_manager"/>
              
    <record id="fleet_odometers_report_view_search" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.view.search</field>
        <field name="model">fleet.vehicle.odometer.report</field>
        <field name="arch" type="xml">
            <search string="Vehicle Petrol Analysis">
                <field name="name" filter_domain="[('name', 'ilike', self)]"/>
                <field name="driver_id" filter_domain="[('driver_id', 'ilike', self)]"/>
                <filter string="Current Month" name="current_month" domain="[('date', '&lt;', (context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('date','&gt;=',time.strftime('%%Y-%%m-01'))]"/>
                <filter string="Previous Month" name="prev_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('date','&lt;',time.strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 6 Months" name="prev_six_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=5)).strftime('%%Y-%%m-01')),('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 12 Months" name="prev_twelve_month" domain="[('date','&gt;=',(context_today()-relativedelta(months=11)).strftime('%%Y-%%m-01')),('date','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <separator/>
                <group expand="1" string="Group By">
                    <filter string="Vehicle" name="vehicle" context="{'group_by':'license_plate'}"/>
                    <filter string="Driver" name="driver" context="{'group_by':'driver_id'}"/>
                    <filter string="Date Interval" name="date" context="{'group_by': 'date'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="fleet_odometers_report_view_pivot" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.view.pivot</field>
        <field name="model">fleet.vehicle.odometer.report</field>
        <field name="arch" type="xml">
            <pivot sample="1">
                <field name="driver_id" type="col" />
                <field name="date" type="row" interval="month" />
                <field name="distance" type="measure" />
            </pivot>
        </field>
    </record>

    <record id="fleet_odometers_report_view_graph" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.view.graph</field>
        <field name="model">fleet.vehicle.odometer.report</field>
        <field name="arch" type="xml">
            <graph string="Fleet Odometers Analysis" sample="1" stacked="0">
                <field name="date" interval="month"/>
                <field name="license_plate"/>
                <field name="distance" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="fleet_vechicle_odometers_report_view_tree" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.report.view.tree</field>
        <field name="model">fleet.vehicle.odometer.report</field>
        <field name="arch" type="xml">
            <tree string="Fleet Odometers Analysis" create="0">
                <field name="name"/>
                <field name="license_plate" optional="show"/>
                <field name="driver_id" optional="hide"/>
                <field name="date" optional="show"/>
                <field name="distance" optional="show" sum="Sum of Distance"/>
            </tree>
        </field>
    </record>

    <record id="fleet_vechicle_odometers_report_view_form" model="ir.ui.view">
        <field name="name">fleet.vehicle.odometer.report.form</field>
        <field name="model">fleet.vehicle.odometer.report</field>
        <field name="arch" type="xml">
            <form string="Fleet Odometers Analysis" create="0" edit="0">
                <sheet>
                    <group>
                        <group>
                            <field name="license_plate"/>
                            <field name="driver_id"/>
                        </group>
                        <group>
                            <field name="date"/>
                            <field name="distance"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="fleet_odometers_reporting_action" model="ir.actions.act_window">
        <field name="name">Odometers Analysis</field>
        <field name="res_model">fleet.vehicle.odometer.report</field>
        <field name="view_mode">graph,pivot</field>
        <field name="view_id"></field>
        <field name="context" eval="{'search_default_current_month': 1}"/>
        <field name="search_view_id" ref="fleet.fleet_odometers_report_view_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
              No data for analysis
            </p>
            <p>
              Manage efficiently your different effective vehicles Costs with Odoo.
            </p>
        </field>
    </record>

    <menuitem id="menu_fleet_reporting_odometers"
              name="Odometers"
              parent="menu_fleet_reporting"
              action="fleet_odometers_reporting_action"
              sequence="2"
              groups="fleet_group_manager"/>
    
    <record id="fleet_trips_report_view_search" model="ir.ui.view">
        <field name="name">fleet.vehicle.trip.view.search</field>
        <field name="model">fleet.vehicle.trip.report</field>
        <field name="arch" type="xml">
            <search string="Vehicle Petrol Analysis">
                <field name="name" filter_domain="[('name', 'ilike', self)]"/>
                <field name="driver_id" filter_domain="[('driver_id', 'ilike', self)]"/>
                <filter string="Current Month" name="current_month" domain="[('datetime', '&lt;', (context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01')), ('datetime','&gt;=',(datetime.datetime.now().replace(day=1)-relativedelta(hours=8)).strftime('%%Y-%%m-%%d %%H:%%M:%%S'))]"/>
                <filter string="Previous Month" name="prev_month" domain="[('datetime','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-01')),('datetime','&lt;',time.strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 6 Months" name="prev_six_month" domain="[('datetime','&gt;=',(context_today()-relativedelta(months=5)).strftime('%%Y-%%m-01')),('datetime','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <filter string="Last 12 Months" name="prev_twelve_month" domain="[('datetime','&gt;=',(context_today()-relativedelta(months=11)).strftime('%%Y-%%m-01')),('datetime','&lt;',(context_today()+relativedelta(months=1)).strftime('%%Y-%%m-01'))]"/>
                <separator/>
                <group expand="1" string="Group By">
                    <filter string="Vehicle" name="vehicle" context="{'group_by':'license_plate'}"/>
                    <filter string="Driver" name="driver" context="{'group_by':'driver_id'}"/>
                    <filter string="Date Interval" name="datetime" context="{'group_by': 'datetime'}"/>
                </group>
            </search>
        </field>
    </record>

    <record id="fleet_trips_report_view_pivot" model="ir.ui.view">
        <field name="name">fleet.vehicle.trip.view.pivot</field>
        <field name="model">fleet.vehicle.trip.report</field>
        <field name="arch" type="xml">
            <pivot sample="1">
                <field name="driver_id" type="col" />
                <field name="datetime" type="row" interval="month" />
                <field name="vehicle_id" type="row" />
                <field name="total" type="measure" />
            </pivot>
        </field>
    </record>

    <record id="fleet_trips_report_view_graph" model="ir.ui.view">
        <field name="name">fleet.vehicle.trip.view.graph</field>
        <field name="model">fleet.vehicle.trip.report</field>
        <field name="arch" type="xml">
            <graph string="Trips Analysis" sample="1" stacked="0">
                <field name="datetime" interval="month"/>
                <field name="driver_id"/>
                <field name="total" type="measure"/>
            </graph>
        </field>
    </record>

    <record id="fleet_vechicle_trips_report_view_tree" model="ir.ui.view">
        <field name="name">fleet.vehicle.trip.report.view.tree</field>
        <field name="model">fleet.vehicle.trip.report</field>
        <field name="arch" type="xml">
            <tree string="Trips Analysis" create="0">
                <field name="name"/>
                <field name="vehicle_id" optional="show"/>
                <field name="driver_id" optional="hide"/>
                <field name="datetime" optional="show"/>
                <field name="distance" optional="show"/>
                <field name="loading_weight" optional="show"/>
                <field name="total" optional="show" sum="Sum of Total"/>
            </tree>
        </field>
    </record>

    <record id="fleet_vechicle_trips_report_view_form" model="ir.ui.view">
        <field name="name">fleet.vehicle.trip.report.form</field>
        <field name="model">fleet.vehicle.trip.report</field>
        <field name="arch" type="xml">
            <form string="Trips Analysis" create="0" edit="0">
                <sheet>
                    <group>
                        <group>
                            <field name="vehicle_id"/>
                            <field name="driver_id"/>
                        </group>
                        <group>
                            <field name="datetime"/>
                            <field name="distance"/>
                            <field name="loading_weight"/>
                            <field name="total"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="fleet_trips_reporting_action" model="ir.actions.act_window">
        <field name="name">Trips Analysis</field>
        <field name="res_model">fleet.vehicle.trip.report</field>
        <field name="view_mode">graph,pivot</field>
        <field name="view_id"></field>
        <field name="context" eval="{'search_default_current_month': 1}"/>
        <field name="search_view_id" ref="fleet.fleet_trips_report_view_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_empty_folder">
              No data for analysis
            </p>
            <p>
              Manage efficiently your different effective vehicles Costs with Odoo.
            </p>
        </field>
    </record>

    <menuitem id="menu_fleet_reporting_trips"
              name="Trips"
              parent="menu_fleet_reporting"
              action="fleet_trips_reporting_action"
              sequence="1"
              groups="fleet_group_manager"/>
</odoo>
